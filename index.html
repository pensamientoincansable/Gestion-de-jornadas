<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telepizza - Gesti√≥n de Jornadas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>Telepizza</h1>
            <span>Gesti√≥n de Jornadas</span>
        </div>
        
        <!-- Selecci√≥n de rol -->
        <div class="selector active">
            <h2>Selecciona tu rol</h2>
            <button class="btn" id="btnTelepizzero">Telepizzero</button>
            <button class="btn" id="btnGerencia">Gerencia</button>
        </div>
        
        <!-- Secci√≥n para telepizzeros -->
        <div class="telepizzero-section">
            <h2>Registro de Jornada</h2>
            
            <div class="permiso-geolocalizacion" id="permisoGeolocalizacion">
                <h3>üìç Activaci√≥n de Geolocalizaci√≥n</h3>
                <p>Para registrar tu jornada, necesitamos acceder a tu ubicaci√≥n.</p>
                <p>Haz clic en "Activar Geolocalizaci√≥n" y permite el acceso cuando tu navegador lo solicite.</p>
                <div class="loader" id="loaderGeolocalizacion" style="display: none;"></div>
                <button class="btn btn-success" id="btnActivarGeolocalizacion">Activar Geolocalizaci√≥n</button>
            </div>
            
            <div id="contenidoFichaje" style="display: none;">
                <div class="form-group">
                    <label for="dniInput">Introduce tu DNI (8 d√≠gitos)</label>
                    <input type="text" id="dniInput" placeholder="Ej: 00000000" maxlength="8">
                    <small style="color: #FFC72C; font-size: 0.9rem;">Solo n√∫meros, sin letras</small>
                </div>
                
                <button class="btn" id="btnFichar">Fichar Entrada/Salida</button>
                
                <div class="geolocalizacion-info" id="infoGeolocalizacion" style="display: none;">
                    <h3>üìç Ubicaci√≥n Detectada</h3>
                    <div id="estadoGeolocalizacion">Obteniendo ubicaci√≥n...</div>
                    <div class="coordenadas" id="coordenadas"></div>
                    <div class="ubicacion-aproximada" id="direccionAproximada"></div>
                    <div class="mapa" id="mapaContainer">
                        <div id="mapaPlaceholder">Mapa se cargar√° aqu√≠</div>
                    </div>
                </div>
                
                <div class="mensaje" id="mensajeTelepizzero"></div>
            </div>
            
            <button class="btn volver-btn" id="volverTelepizzero">Volver al Men√∫</button>
        </div>
        
        <!-- Secci√≥n para gerencia -->
        <div class="gerencia-section">
            <h2>Acceso Gerencia</h2>
            <div class="form-group">
                <label for="passwordInput">Contrase√±a</label>
                <input type="password" id="passwordInput" placeholder="Introduce la contrase√±a">
            </div>
            <button class="btn" id="btnAcceder">Acceder</button>
            <div class="mensaje" id="mensajeGerencia"></div>
            <button class="btn volver-btn" id="volverGerencia">Volver</button>
        </div>
        
        <!-- Secci√≥n de gesti√≥n para gerencia -->
        <div class="registro-section">
            <h2>Panel de Gerencia <span class="badge">En l√≠nea</span></h2>
            
            <div class="tabs">
                <div class="tab-btn active" data-tab="registros">üìä Registros</div>
                <div class="tab-btn" data-tab="usuarios">üë• Usuarios</div>
                <div class="tab-btn" data-tab="ausencias">‚ö†Ô∏è Ausencias</div>
                <div class="tab-btn" data-tab="correo">üìß Correo</div>
                <div class="tab-btn" data-tab="semanas">üìÖ Semanas</div>
            </div>
            
            <!-- Pesta√±a de Registros -->
            <div class="tab-content active" id="registros-tab">
                <h3>Registro de Jornadas</h3>
                
                <div class="filtros">
                    <select id="filtroPuesto">
                        <option value="">Todos los puestos</option>
                        <option value="auxiliar">Auxiliar de Tienda</option>
                        <option value="repartidor">Repartidor</option>
                        <option value="encargado">Encargado</option>
                        <option value="limpieza">Limpieza</option>
                    </select>
                    
                    <input type="date" id="filtroFecha">
                    
                    <button class="btn btn-secondary" id="btnFiltrar">Filtrar</button>
                    <button class="btn btn-gris" id="btnResetFiltros">Reset</button>
                </div>
                
                <table id="tablaRegistros">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>DNI</th>
                            <th>Puesto</th>
                            <th>Fecha</th>
                            <th>Entrada</th>
                            <th>Salida</th>
                            <th>Horas</th>
                            <th>Ubicaci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los registros se llenar√°n con JavaScript -->
                    </tbody>
                </table>
                
                <div class="total-horas" id="totalHoras"></div>
                
                <div style="margin-top: 25px; text-align: center;">
                    <button class="btn btn-reporte" id="btnEnviarReporteDiario">üì§ Reporte Diario</button>
                    <button class="btn btn-reporte" id="btnEnviarReporteSemanal">üìÖ Reporte Semanal</button>
                    <button class="btn btn-gris" id="btnEnviarReporteMensual">üìà Reporte Mensual</button>
                </div>
            </div>
            
            <!-- Pesta√±a de Gesti√≥n de Usuarios -->
            <div class="tab-content" id="usuarios-tab">
                <h3>Gesti√≥n de Telepizzeros</h3>
                
                <div class="form-group">
                    <label for="nuevoDni">DNI (8 d√≠gitos)</label>
                    <input type="text" id="nuevoDni" placeholder="Ej: 00000000" maxlength="8">
                    
                    <label for="nuevoNombre">Nombre completo</label>
                    <input type="text" id="nuevoNombre" placeholder="Ej: Juan P√©rez">
                    
                    <label for="nuevoPuesto">Puesto</label>
                    <select id="nuevoPuesto">
                        <option value="auxiliar">Auxiliar de Tienda</option>
                        <option value="repartidor">Repartidor</option>
                        <option value="encargado">Encargado</option>
                        <option value="limpieza">Limpieza</option>
                    </select>
                    
                    <button class="btn btn-secondary" id="btnAgregarUsuario">‚ûï Agregar</button>
                </div>
                
                <div id="listaUsuarios">
                    <!-- Lista de usuarios se llenar√° con JavaScript -->
                </div>
            </div>
            
            <!-- Pesta√±a de Control de Ausencias -->
            <div class="tab-content" id="ausencias-tab">
                <h3>Control de Ausencias</h3>
                
                <div class="form-group">
                    <label for="selectUsuarioAusencia">Seleccionar Telepizzero</label>
                    <select id="selectUsuarioAusencia">
                        <!-- Opciones se llenar√°n con JavaScript -->
                    </select>
                    
                    <label for="fechaAusencia">Fecha</label>
                    <input type="date" id="fechaAusencia">
                    
                    <label for="tipoAusencia">Tipo</label>
                    <select id="tipoAusencia">
                        <option value="falta">‚ùå Falta</option>
                        <option value="ausencia_justificada">‚ö†Ô∏è Ausencia Justificada</option>
                        <option value="retraso">‚è∞ Retraso</option>
                    </select>
                    
                    <label for="motivoAusencia">Motivo (opcional)</label>
                    <input type="text" id="motivoAusencia" placeholder="Motivo">
                    
                    <button class="btn btn-secondary" id="btnRegistrarAusencia">üìù Registrar</button>
                </div>
                
                <h4>üìã Incidencias</h4>
                <div id="listaAusencias">
                    <!-- Lista de ausencias se llenar√° con JavaScript -->
                </div>
            </div>
            
            <!-- Pesta√±a de Configuraci√≥n de Correo -->
            <div class="tab-content" id="correo-tab">
                <h3>Vincular Correo</h3>
                
                <div class="correo-info">
                    <h3>‚öôÔ∏è Reportes Autom√°ticos</h3>
                    <p>Vincule un correo para recibir reportes autom√°ticos.</p>
                    <p>Template ID: template_g60lzrr</p>
                </div>
                
                <div class="form-group">
                    <label for="correoElectronico">Correo Electr√≥nico</label>
                    <input type="email" id="correoElectronico" placeholder="gerencia@telepizza.com">
                    
                    <button class="btn btn-success" id="btnGuardarCorreo">üíæ Guardar</button>
                </div>
                
                <div class="correo-info" id="infoCorreoGuardado">
                    <!-- Informaci√≥n del correo guardado se mostrar√° aqu√≠ -->
                </div>
                
                <div class="form-group">
                    <h4>üì§ Enviar Manualmente</h4>
                    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-reporte" id="btnEnviarDiarioManual">üìä Diario</button>
                        <button class="btn btn-reporte" id="btnEnviarSemanalManual">üìÖ Semanal</button>
                        <button class="btn btn-gris" id="btnEnviarMensualManual">üìà Mensual</button>
                    </div>
                </div>
                
                <div class="mensaje" id="mensajeCorreo"></div>
            </div>
            
            <!-- Pesta√±a de Gesti√≥n Semanal -->
            <div class="tab-content" id="semanas-tab">
                <h3>üìÖ Gesti√≥n Semanal</h3>
                
                <div class="form-group">
                    <label for="selectSemana">Seleccionar Semana</label>
                    <select id="selectSemana">
                        <!-- Opciones se llenar√°n con JavaScript -->
                    </select>
                    
                    <label for="selectPuestoSemana">Filtrar por Puesto</label>
                    <select id="selectPuestoSemana">
                        <option value="">Todos los puestos</option>
                        <option value="auxiliar">Auxiliar de Tienda</option>
                        <option value="repartidor">Repartidor</option>
                        <option value="encargado">Encargado</option>
                        <option value="limpieza">Limpieza</option>
                    </select>
                </div>
                
                <div id="infoSemana">
                    <div class="semana-info">
                        <h4>üìä Resumen Semanal</h4>
                        <div id="resumenSemanal"></div>
                    </div>
                    
                    <table id="tablaSemanal">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Puesto</th>
                                <th>Total Horas</th>
                                <th>D√≠as Trabajados</th>
                                <th>Promedio Diario</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Datos semanales se llenar√°n con JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 25px; text-align: center;">
                    <button class="btn btn-success" id="btnExportarSemanal">üì• Exportar Semana</button>
                    <button class="btn btn-reporte" id="btnEnviarReporteSemanaSeleccionada">üì§ Enviar Reporte</button>
                </div>
            </div>
            
            <button class="btn volver-btn" id="volverRegistro">‚Üê Volver</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script src="data.js"></script>
    <script src="email.js"></script>
    <script src="app.js"></script>
</body>
</html>
